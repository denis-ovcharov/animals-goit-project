{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/js/success-stories.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst URL = \"https://paw-hut.b.goit.study\";\n\nconst animalsURL = `${URL}/api/animals`;\nconst categoriesURL = `${URL}/api/categories`;\nconst ordersURL = `${URL}/api/orders`;\nconst feedbacksURL = `${URL}/api/feedbacks`;\n\nexport async function getAnimals({ page = 1, limit = 10, categoryId }) {\n    const params = { page, limit };\n    if (categoryId) {\n    params.categoryId = categoryId;\n    // Если категория выбрана, добавь ее в запрос, если нет, то не добавляй ее вообще.\n    // Потому что, нет категории \"ВСЕ\" \n}\n    const response = await\n        axios.get(animalsURL, { params });\n    return response.data;\n    // При вызове передаете в аргументах первой порции карточек page, limit, а для фильтра categoryId\n};\n\nexport async function getCategories() {\n    const response = await\n        axios.get(categoriesURL);\n    return response.data;\n\n    \n};\n\nexport async function createOrder(orderData) {\n    const response = await\n        axios.post(ordersURL, orderData);\n    return response.data;\n    \n};\n\nexport async function getFeedbacks(limit = 10, page = 1) {\n    const response = await\n        axios.get(feedbacksURL, {\n            params: {\n                page,\n                limit,\n            }\n        })\n    return response.data;\n    // При вызове функции передаете в аргументы лимит и страничку\n    \n};\n\n","// Swiper\nimport Swiper from 'swiper';\nimport { Navigation, Pagination} from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\n// Star-rating.css\nimport 'css-star-rating/css/star-rating.css';\n\n// iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Import API function\nimport { getFeedbacks } from './api.js';\n\nexport async function initFeedbackSection() {\n    const section = document.querySelector('#feedback');\n    if (!section) return;\n\n    const swiperEl = section.querySelector('.swiper.feedback-swiper');\n    const wrapper = section.querySelector('.swiper-wrapper');\n    const paginationEl = section.querySelector('.feedback-swiper-pagination');\n    const nextBtn = section.querySelector('.feedback-swiper-button-next');\n    const prevBtn = section.querySelector('.feedback-swiper-button-prev');\n    const loader = section.querySelector('.loader');\n    \n    // Loader on\n    loader.classList.remove('hideshow');\n\n    try {\n        // Backend request\n        const page = Math.floor(Math.random() * 9) + 1;\n        const response = await getFeedbacks(5, page);\n        const feedbacks = response.feedbacks;\n\n\n        //Validate returns: no array or < 3 feedback = error => catch block.\n        if (!Array.isArray(feedbacks) || feedbacks.length < 3) {\n        throw new Error('Not enough feedbacks (min 3 required)');\n        }\n\n        // Render\n        wrapper.innerHTML = feedbacks.map(renderFeedbackSlide).join('');\n\n        // Swiper init\n        new Swiper(swiperEl, {\n        modules: [Navigation, Pagination],\n        speed: 1000,\n        slidesPerView: 1,\n        spaceBetween: 16,\n        loop: false,\n        resistanceRatio: 0.85,\n        touchRatio: 1.2,\n        \n        breakpoints: {\n            768: {              \n            slidesPerView: 2,\n            spaceBetween: 32, \n            },\n\n            1440: {             \n            slidesPerView: 2,\n            spaceBetween: 32,\n            },\n        },\n\n\n        pagination: {\n            el: paginationEl,\n            clickable: true,\n            dynamicBullets: true,\n        },\n\n        navigation: {\n            nextEl: nextBtn,\n            prevEl: prevBtn,\n            disabledClass: 'is-disabled',\n            },\n        });\n    } catch (err) {\n        console.error(err);\n        iziToast.error({\n            title: 'Error',\n            message: err.message,\n            position: 'topRight',\n        });\n    } finally {\n        // Loader off\n        loader.classList.add('hideshow');\n    }\n}\n\n// HTML render function\nfunction renderFeedbackSlide(item) {\n    const name = item?.author ?? 'User';\n    const text = item?.description ?? '';\n    const rating = clampRating(item?.rate ?? 0);\n\n    \n    const full = Math.floor(rating);\n    const hasHalf = rating % 1 >= 0.5;\n    const ratingClass = `rating value-${full}${hasHalf ? ' half' : ''} star-icon`;\n\n    const stars = Array.from({ length: 5 })\n        .map(\n            () => `\n        <div class=\"star\">\n            <svg class=\"star-empty\" aria-hidden=\"true\">\n                <use href=\"../img/star-rating.icons.svg#star-empty\"></use>\n            </svg>\n            <svg class=\"star-half\" aria-hidden=\"true\">\n                <use href=\"../img/star-rating.icons.svg#star-half\"></use>\n            </svg>\n            <svg class=\"star-filled\" aria-hidden=\"true\">\n                <use href=\"../img/star-rating.icons.svg#star-filled\"></use>\n            </svg>\n        </div>`\n            ).join('');\n        \n    return `\n        <div class=\"swiper-slide\">\n            <div class=\"feedback-card\">\n                <div class=\"${ratingClass}\" aria-label=\"Rating: ${rating} out of 5\">\n                    <div class=\"star-container\">\n                        ${stars}\n                    </div>\n                </div>\n                <p class=\"feedback-comment\">${text}</p>\n                <p class=\"feedback-author\">${name}</p>\n            </div>\n        </div>\n    `;\n}\n\n// Validation rating between 0 and 5\nfunction clampRating(val) {\n    const n = Number(val);\n    if (!Number.isFinite(n)) return 0;\n    return Math.max(0, Math.min(5, n));\n}\n\n\n","// section success-stories\nimport { initFeedbackSection } from './js/success-stories.js';\ndocument.addEventListener('DOMContentLoaded', initFeedbackSection);\n// end section success-stories"],"names":["URL","feedbacksURL","getFeedbacks","limit","page","axios","initFeedbackSection","section","swiperEl","wrapper","paginationEl","nextBtn","prevBtn","loader","feedbacks","renderFeedbackSlide","Swiper","Navigation","Pagination","err","iziToast","item","name","text","rating","clampRating","full","hasHalf","ratingClass","stars","val","n"],"mappings":"kxBAEA,MAAMA,EAAM,+BAKNC,EAAe,GAAGD,CAAG,iBA8BpB,eAAeE,EAAaC,EAAQ,GAAIC,EAAO,EAAG,CAQrD,OAPiB,MACbC,EAAM,IAAIJ,EAAc,CACpB,OAAQ,CACJ,KAAAG,EACA,MAAAD,CACH,CACb,CAAS,GACW,IAGpB,CC/BO,eAAeG,GAAsB,CACxC,MAAMC,EAAU,SAAS,cAAc,WAAW,EAClD,GAAI,CAACA,EAAS,OAEd,MAAMC,EAAWD,EAAQ,cAAc,yBAAyB,EAC1DE,EAAUF,EAAQ,cAAc,iBAAiB,EACjDG,EAAeH,EAAQ,cAAc,6BAA6B,EAClEI,EAAUJ,EAAQ,cAAc,8BAA8B,EAC9DK,EAAUL,EAAQ,cAAc,8BAA8B,EAC9DM,EAASN,EAAQ,cAAc,SAAS,EAG9CM,EAAO,UAAU,OAAO,UAAU,EAElC,GAAI,CAEA,MAAMT,EAAO,KAAK,MAAM,KAAK,SAAW,CAAC,EAAI,EAEvCU,GADW,MAAMZ,EAAa,EAAGE,CAAI,GAChB,UAI3B,GAAI,CAAC,MAAM,QAAQU,CAAS,GAAKA,EAAU,OAAS,EACpD,MAAM,IAAI,MAAM,uCAAuC,EAIvDL,EAAQ,UAAYK,EAAU,IAAIC,CAAmB,EAAE,KAAK,EAAE,EAG9D,IAAIC,EAAOR,EAAU,CACrB,QAAS,CAACS,EAAYC,CAAU,EAChC,MAAO,IACP,cAAe,EACf,aAAc,GACd,KAAM,GACN,gBAAiB,IACjB,WAAY,IAEZ,YAAa,CACT,IAAK,CACL,cAAe,EACf,aAAc,EACb,EAED,KAAM,CACN,cAAe,EACf,aAAc,EACb,CACJ,EAGD,WAAY,CACR,GAAIR,EACJ,UAAW,GACX,eAAgB,EACnB,EAED,WAAY,CACR,OAAQC,EACR,OAAQC,EACR,cAAe,aACd,CACb,CAAS,CACJ,OAAQO,EAAK,CACV,QAAQ,MAAMA,CAAG,EACjBC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,EAAI,QACb,SAAU,UACtB,CAAS,CACT,QAAc,CAENN,EAAO,UAAU,IAAI,UAAU,CAClC,CACL,CAGA,SAASE,EAAoBM,EAAM,CAC/B,MAAMC,GAAOD,GAAA,YAAAA,EAAM,SAAU,OACvBE,GAAOF,GAAA,YAAAA,EAAM,cAAe,GAC5BG,EAASC,GAAYJ,GAAA,YAAAA,EAAM,OAAQ,CAAC,EAGpCK,EAAO,KAAK,MAAMF,CAAM,EACxBG,EAAUH,EAAS,GAAK,GACxBI,EAAc,gBAAgBF,CAAI,GAAGC,EAAU,QAAU,EAAE,aAE3DE,EAAQ,MAAM,KAAK,CAAE,OAAQ,CAAC,CAAE,EACjC,IACG,IAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAYlB,EAAc,KAAK,EAAE,EAEjB,MAAO;AAAA;AAAA;AAAA,8BAGmBD,CAAW,yBAAyBJ,CAAM;AAAA;AAAA,0BAE9CK,CAAK;AAAA;AAAA;AAAA,8CAGeN,CAAI;AAAA,6CACLD,CAAI;AAAA;AAAA;AAAA,KAIjD,CAGA,SAASG,EAAYK,EAAK,CACtB,MAAMC,EAAI,OAAOD,CAAG,EACpB,OAAK,OAAO,SAASC,CAAC,EACf,KAAK,IAAI,EAAG,KAAK,IAAI,EAAGA,CAAC,CAAC,EADD,CAEpC,CC3IA,SAAS,iBAAiB,mBAAoBzB,CAAmB"}